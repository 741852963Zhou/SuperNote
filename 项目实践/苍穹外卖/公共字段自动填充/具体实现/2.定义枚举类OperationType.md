# 2. 定义枚举类OperationType

在 [[项目实践/苍穹外卖/公共字段自动填充/具体实现/1.定义注解@AutoFill|1.定义注解@AutoFill]] 中，我们定义了 `@AutoFill` 注解需要一个 `OperationType` 类型的 `value` 属性，用来区分 `INSERT` 和 `UPDATE` 操作。

这一步就是来定义这个 `OperationType` 枚举。

> [!EXAMPLE] 代码实现 (Code)
> 我们在 `sky-common` 模块的 `com.sky.enumeration` 包下创建 `OperationType` 枚举。
> ```java
> package com.sky.enumeration;
>
> /**
>  * 数据库操作类型
>  */
> public enum OperationType {
>
>     /**
>      * 更新操作
>      */
>     UPDATE,
>
>     /**
>      * 插入操作
>      */
>     INSERT
>
> }
> ```
>

> [!NOTE] 核心解析
> `enum` (枚举) 是 [[知识库/java基础/Java-枚举(Enum)|Java-枚举(Enum)]] 提供的一种特殊数据类型，用于**限定变量只能取预先定义好的几个值**。
>
> **为什么使用枚举？**
> * **==类型安全==**：它保证了 `OperationType` 类型的变量**只能**是 `UPDATE` 或 `INSERT`，防止传入无效的值（比如字符串 `"update"` 或数字 `1`）。编译器会在编译时就检查出错误。
> * **==可读性高==**：代码 `if (type == OperationType.UPDATE)` 比 `if (type == 1)` 更清晰易懂。
> * **==易于维护==**：如果未来需要增加新的操作类型（虽然可能性不大），只需要修改 `OperationType.java` 这一个文件即可。

> [!TIP] 关键点：如何在 @AutoFill 中使用
> 通过定义 `OperationType value();`，我们强制 `@AutoFill` 注解的使用者必须提供 `OperationType.UPDATE` 或 `OperationType.INSERT` 作为 `value` 属性的值。
> ```java
> @AutoFill(OperationType.INSERT) // 使用枚举常量
> void insert(Employee employee);
> ```
>
>
> 之后，在 [[项目实践/苍穹外卖/公共字段自动填充/具体实现/4.实现AOP通知(before)|4.实现AOP通知(before)]] 中，`AutoFillAspect` 会通过反射读取这个 `value` 值，并根据它是 `UPDATE` 还是 `INSERT` 来执行不同的填充逻辑。

---
**返回MOC：**
[[项目实践/苍穹外卖/公共字段自动填充/实现 (MOC)|实现 (MOC)]]